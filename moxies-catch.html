<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Moxie‚Äôs Catch ‚Äî Pluto Outpost</title>
  <style>
    :root{
      --ink:#0b1220; --panel:#101a2f; --edge:#2e3e66; --cy:#6fe7ff;
      --glow:#33d1ff; --accent:#ffd34d; --muted:#9fb6d1;
    }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:linear-gradient(180deg,#0a1222,#0a1428 40%,#0c152b);
      color:#cfe6ff; margin:0;
    }
    .wrap{
      max-width:620px; margin:2rem auto; padding:1.2rem 1.3rem;
      background:var(--panel); border-radius:14px;
      box-shadow:0 0 0 1px var(--edge), 0 18px 40px rgba(0,0,0,.35); position:relative;
    }
    /* ===== Banner / Skyline ===== */
    .banner{
      height:160px; margin:-1.2rem -1.3rem 1rem; border-radius:14px 14px 0 0;
      background: radial-gradient(120% 100% at 70% 0%, rgba(51,209,255,.18), transparent 60%),
                  linear-gradient(180deg, #0d1a34, #0c1426);
      border-bottom:1px solid var(--edge); position:relative; overflow:hidden;
    }
    #sky{position:absolute; inset:0; overflow:hidden;}
    .star,.light,.beacon{
      position:absolute; border-radius:50%;
      background:#9fe6ff; opacity:.8; box-shadow:0 0 8px rgba(111,231,255,.6);
      transform:translate(-50%,-50%);
    }
    .star{ width:2px; height:2px; opacity:.6; box-shadow:0 0 6px rgba(111,231,255,.5); }
    .light{ width:3px; height:3px; opacity:.9; }
    .beacon{ width:5px; height:5px; background:#ffd34d; box-shadow:0 0 10px rgba(255,211,77,.8); }
    .horizon{
      position:absolute; left:0; right:0; bottom:0; height:48%;
      background:
        linear-gradient(0deg, #0b1020 0%, transparent 55%),
        repeating-linear-gradient(90deg, #0f1830 0 30px, #0b1326 30px 60px);
      opacity:.75;
    }

    h1{ margin:.25rem 0 .25rem; font-size:1.8rem; color:var(--accent); letter-spacing:.4px; }
    .subtitle{ color:var(--muted); font-size:.9rem; margin-bottom:.75rem }
    .stats{ display:grid; grid-template-columns: 1fr 1fr; gap:.3rem .75rem; }
    .stats div{ margin:.1rem 0; }
    .bar{ height:1px; background:linear-gradient(90deg,transparent,var(--edge),transparent);
      margin:.8rem 0 1.1rem; }
    .row{ display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; }
    .note{ color:var(--muted); font-size:.85rem }

    button{
      background:#16264a; color:#cfe6ff; border:1px solid var(--edge);
      padding:.6rem .9rem; border-radius:10px; cursor:pointer; transition:transform .02s ease, filter .15s ease;
      box-shadow:0 0 0 1px rgba(255,255,255,.02) inset, 0 10px 20px rgba(0,0,0,.25);
    }
    button:hover{ filter:brightness(1.05); }
    button:active{ transform:translateY(1px); }
    button:disabled{ opacity:.5; cursor:default; }
    .pill{ display:inline-block; padding:.05rem .45rem; border:1px solid var(--edge);
      border-radius:999px; color:var(--cy); margin-left:.35rem; font-size:.75rem; }

    /* ===== Moxie Sprite ===== */
    .moxie{
      display:inline-flex; align-items:center; gap:.4rem; user-select:none;
      margin-right:.25rem;
    }
    .moxie .face{
      width:28px; height:28px; border-radius:6px; background:#203056; border:1px solid #2e3e66;
      display:grid; place-items:center; box-shadow:0 0 10px rgba(51,209,255,.18) inset;
      font-size:18px;
    }
    .wiggle{ animation:wiggle .45s ease; }
    @keyframes wiggle{
      0%,100%{ transform:translateY(0) rotate(0deg);}
      25%{ transform:translateY(-1px) rotate(-6deg);}
      50%{ transform:translateY(0) rotate(6deg);}
      75%{ transform:translateY(-1px) rotate(-3deg);}
    }

    /* Toast */
    .toast{
      position:fixed; top:1rem; right:1rem; background:rgba(20,45,80,.96);
      color:#cfe6ff; padding:.75rem 1rem; border:1px solid var(--edge); border-radius:10px;
      box-shadow:0 0 18px rgba(51,209,255,.25), inset 0 0 12px rgba(51,209,255,.06);
      font-size:.9rem; opacity:0; pointer-events:none; transition:opacity .45s ease; z-index:9999;
    }
    .toast.show{ opacity:1; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="banner">
      <div id="sky"></div>
      <div class="horizon"></div>
    </div>

    <h1>BYTE & SPICE: Moxie‚Äôs Catch</h1>
    <div class="subtitle">Pluto Observatory District ‚Ä¢ ‚ÄúEvery bite, a byte.‚Äù</div>

    <div class="stats">
      <div>ThiccTokens‚Ñ¢: <span id="coins">0</span></div>
      <div>Tokens / sec: <span id="cps">0</span></div>
      <div>Booty per Hour (BPH): <span id="bph">0</span></div>
      <div>Catchmastery: <span id="catch">0</span></div>
      <div>Œû‚ÄëSigils: <span id="sigil">0</span></div>
      <div>Prestige Multiplier: <span id="mult">1.00√ó</span></div>
    </div>

    <div class="bar"></div>

    <div class="row">
      <span class="moxie"><span id="moxFace" class="face">üßë‚ÄçüöÄ</span><span class="note">Moxie:</span></span>
      <button id="catchBtn">ü™ù Reel in the Thick (+BPH)</button>
      <small class="note">Each haul raises BPH by <strong>+3</strong>.</small>
    </div>

    <div class="row" style="margin-top:.6rem">
      <button id="netBtn">‚öì Upgrade Curvature Lattice (100 TT)</button>
      <small class="note">+20 BPH per upgrade. Price scales √ó1.25</small>
    </div>

    <div class="row" style="margin-top:.6rem">
      <button id="prestigeBtn">üí† Sell the Haul</button>
      <small class="note">Reset for Œû‚ÄëSigils (permanent +15% BPH each)</small>
    </div>

    <div class="row" style="margin-top:.6rem">
      <button id="saveBtn">üìú Seal the Scroll</button>
      <button id="resetBtn">üîÑ Banish to the Depths</button>
      <span class="pill">auto‚Äësave</span>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    // Helpers
    const $ = id => document.getElementById(id);
    const fmt = n => n.toLocaleString(undefined,{maximumFractionDigits:2});
    const toast = (msg, ms=4200) => { const t=$('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), ms); };

    // State
    const S = { coins:0, bph:0, catch:0, nets:0, netPrice:100, sigil:0, lastTick:Date.now() };
    const saved = localStorage.getItem('moxies-catch'); if (saved) Object.assign(S, JSON.parse(saved));

    // Rates
    const prestigeMult = () => 1 + (S.sigil * 0.15);
    const cps = () => (S.bph * prestigeMult()) / 3600;

    // Skyline generator (stars/lights scale with sigils)
    function updateSkyline(){
      const sky = $('sky'); sky.innerHTML = '';
      const tier = S.sigil;
      const stars = 40 + tier*15;   // more sigils -> more stars
      const lights = 10 + tier*6;   // more city windows
      const beacons = Math.floor(tier/2); // occasional ad beacons

      const rand = (min,max)=>Math.random()*(max-min)+min;

      for(let i=0;i<stars;i++){
        const s=document.createElement('div'); s.className='star';
        s.style.left = rand(2,98)+'%'; s.style.top = rand(5,55)+'%';
        sky.appendChild(s);
      }
      for(let i=0;i<lights;i++){
        const l=document.createElement('div'); l.className='light';
        l.style.left = rand(2,98)+'%'; l.style.top = rand(55,92)+'%';
        sky.appendChild(l);
      }
      for(let i=0;i<beacons;i++){
        const b=document.createElement('div'); b.className='beacon';
        b.style.left = rand(5,95)+'%'; b.style.top = rand(35,70)+'%';
        sky.appendChild(b);
      }
    }

    // Offline progress
    (function offline(){
      const now = Date.now();
      const dt = Math.max(0, (now - (S.lastTick||now)) / 1000);
      const CAP_HOURS = 12;
      const capped = Math.min(dt, CAP_HOURS*3600);
      const earned = cps() * capped;
      if (earned > 0.01 && capped > 0){
        S.coins += earned;
        setTimeout(() => {
          toast(`While you drifted among Pluto‚Äôs moons (${fmt(capped/3600)}h), Moxie‚Äôs crew hauled ${fmt(earned)} ThiccTokens‚Ñ¢ from the currents.`);
        }, 180);
      }
      S.lastTick = now;
    })();

    // Loop
    function loop(){
      const now = Date.now();
      const dt = (now - S.lastTick) / 1000;
      S.lastTick = now;
      S.coins += cps() * Math.min(dt, 60);
      render();
    }
    setInterval(loop, 1000);

    // Actions
    $('catchBtn').onclick = () => {
      S.catch += 1; S.bph += 3; render();
      // wiggle Moxie
      const face = $('moxFace'); face.classList.remove('wiggle'); void face.offsetWidth; face.classList.add('wiggle');
    };

    $('netBtn').onclick = () => {
      if (S.coins >= S.netPrice){
        S.coins -= S.netPrice; S.nets += 1; S.bph += 20;
        S.netPrice = Math.ceil(S.netPrice * 1.25);
        $('netBtn').textContent = `‚öì Upgrade Curvature Lattice (${S.netPrice} TT)`;
        render();
      }
    };

    function prestige(){
      const earned = Math.floor(S.coins / 1000);
      if (earned <= 0){ toast('Haul not big enough to impress Moxie.'); return; }
      if (!confirm(`Sell your entire haul for ${earned} Œû‚ÄëSigil(s)? This resets your catch and gear.`)) return;

      S.sigil += earned;
      S.coins = 0; S.bph = 0; S.catch = 0; S.nets = 0; S.netPrice = 100;

      save(); render(); toast(`Trade complete. ${earned} Œû‚ÄëSigil(s) etched into your soul.`);
    }
    $('prestigeBtn').onclick = prestige;

    // Save/Reset
    function save(){ localStorage.setItem('moxies-catch', JSON.stringify(S)); }
    $('saveBtn').onclick = () => { save(); toast('Scroll sealed. Progress preserved.'); };
    $('resetBtn').onclick = () => {
      if (!confirm('Banish all progress to the depths?')) return;
      localStorage.removeItem('moxies-catch'); location.reload();
    };
    setInterval(save, 15000);

    // Render
    function render(){
      $('coins').textContent = fmt(S.coins);
      $('cps').textContent = fmt(cps());
      $('bph').textContent = fmt(S.bph);
      $('catch').textContent = S.catch;
      $('sigil').textContent = S.sigil;
      $('mult').textContent = `${fmt(prestigeMult())}√ó`;
      $('netBtn').disabled = S.coins < S.netPrice;
      updateSkyline();
    }

    // Init
    $('netBtn').textContent = `‚öì Upgrade Curvature Lattice (${S.netPrice} TT)`;
    updateSkyline();
    render();
  </script>
</body>
</html>