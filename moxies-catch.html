<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Moxie‚Äôs Catch ‚Äî Pluto Outpost</title>
  <style>
    /* ===== THEME (tweak freely) ===== */
    :root{
      --ink:#0b1220; --panel:#101a2f; --edge:#2e3e66; --cy:#6fe7ff;
      --glow:#33d1ff; --accent:#ffd34d; --muted:#9fb6d1;
    }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:linear-gradient(180deg,#0a1222,#0a1428 40%,#0c152b);
      color:#cfe6ff; margin:0;
    }
    .wrap{
      max-width:620px; margin:2rem auto; padding:1.2rem 1.3rem;
      background:var(--panel); border-radius:14px;
      box-shadow:0 0 0 1px var(--edge), 0 18px 40px rgba(0,0,0,.35);
    }
    h1{ margin:.25rem 0 .25rem; font-size:1.8rem; color:var(--accent); letter-spacing:.4px; }
    .subtitle{ color:var(--muted); font-size:.9rem; margin-bottom:.75rem }
    .stats{ display:grid; grid-template-columns: 1fr 1fr; gap:.3rem .75rem; }
    .stats div{ margin:.1rem 0; }
    .bar{ height:1px; background:linear-gradient(90deg,transparent,var(--edge),transparent);
      margin:.8rem 0 1.1rem; }
    .row{ display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; }
    .note{ color:var(--muted); font-size:.85rem }

    button{
      background:#16264a; color:#cfe6ff; border:1px solid var(--edge);
      padding:.6rem .9rem; border-radius:10px; cursor:pointer; transition:transform .02s ease, filter .15s ease;
      box-shadow:0 0 0 1px rgba(255,255,255,.02) inset, 0 10px 20px rgba(0,0,0,.25);
    }
    button:hover{ filter:brightness(1.05); }
    button:active{ transform:translateY(1px); }
    button:disabled{ opacity:.5; cursor:default; }
    .pill{ display:inline-block; padding:.05rem .45rem; border:1px solid var(--edge);
      border-radius:999px; color:var(--cy); margin-left:.35rem; font-size:.75rem; }

    /* Toast (non-blocking notification) */
    .toast{
      position:fixed; top:1rem; right:1rem; background:rgba(20,45,80,.96);
      color:#cfe6ff; padding:.75rem 1rem; border:1px solid var(--edge); border-radius:10px;
      box-shadow:0 0 18px rgba(51,209,255,.25), inset 0 0 12px rgba(51,209,255,.06);
      font-size:.9rem; opacity:0; pointer-events:none; transition:opacity .45s ease; z-index:9999;
    }
    .toast.show{ opacity:1; }

    /* Optional header art area (swap to your asset) */
    .banner{
      height:140px; margin:-1.2rem -1.3rem 1rem; border-radius:14px 14px 0 0;
      background: radial-gradient(120% 100% at 70% 0%, rgba(51,209,255,.18), transparent 60%),
                  linear-gradient(180deg, #0d1a34, #0c1426);
      border-bottom:1px solid var(--edge);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="banner"></div>

    <h1>BYTE & SPICE: Moxie‚Äôs Catch</h1>
    <div class="subtitle">Pluto Observatory District ‚Ä¢ ‚ÄúEvery bite, a byte.‚Äù</div>

    <div class="stats">
      <div>ThiccTokens‚Ñ¢: <span id="coins">0</span></div>
      <div>Tokens / sec: <span id="cps">0</span></div>
      <div>Booty per Hour (BPH): <span id="bph">0</span></div>
      <div>Catchmastery: <span id="catch">0</span></div>
      <div>Œû‚ÄëSigils: <span id="sigil">0</span></div>
      <div>Prestige Multiplier: <span id="mult">1.00√ó</span></div>
    </div>

    <div class="bar"></div>

    <div class="row">
      <button id="catchBtn">ü™ù Reel in the Thick (+BPH)</button>
      <small class="note">Each haul raises BPH by <strong>+3</strong>.</small>
    </div>

    <div class="row" style="margin-top:.6rem">
      <button id="netBtn">‚öì Upgrade Curvature Lattice (100 TT)</button>
      <small class="note">+20 BPH per upgrade. Price scales √ó1.25</small>
    </div>

    <div class="row" style="margin-top:.6rem">
      <button id="prestigeBtn">üí† Sell the Haul</button>
      <small class="note">Reset for Œû‚ÄëSigils (permanent +15% BPH each)</small>
    </div>

    <div class="row" style="margin-top:.6rem">
      <button id="saveBtn">üìú Seal the Scroll</button>
      <button id="resetBtn">üîÑ Banish to the Depths</button>
      <span class="pill">auto‚Äësave</span>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    // ===== Helpers =====
    const $ = id => document.getElementById(id);
    const fmt = n => n.toLocaleString(undefined,{maximumFractionDigits:2});
    const toast = (msg, ms=4200) => { const t=$('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), ms); };

    // ===== Game State =====
    const S = {
      coins: 0,        // ThiccTokens‚Ñ¢
      bph: 0,          // Booty per hour (base, pre-multiplier)
      catch: 0,        // Catchmastery
      nets: 0,
      netPrice: 100,
      sigil: 0,        // Prestige currency
      lastTick: Date.now()
    };

    // Load
    const saved = localStorage.getItem('moxies-catch');
    if (saved) Object.assign(S, JSON.parse(saved));

    // Rates
    const prestigeMult = () => 1 + (S.sigil * 0.15);     // +15% BPH per sigil
    const cps = () => (S.bph * prestigeMult()) / 3600;   // tokens per sec (with prestige)

    // Offline progress (toast once)
    (function offline(){
      const now = Date.now();
      const dt = Math.max(0, (now - (S.lastTick||now)) / 1000);
      const CAP_HOURS = 12; // keep sane
      const capped = Math.min(dt, CAP_HOURS*3600);
      const earned = cps() * capped;
      if (earned > 0.01 && capped > 0){
        S.coins += earned;
        setTimeout(() => {
          toast(`While you drifted among Pluto‚Äôs moons (${fmt(capped/3600)}h), Moxie‚Äôs crew hauled ${fmt(earned)} ThiccTokens‚Ñ¢ from the currents.`);
        }, 180);
      }
      S.lastTick = now;
    })();

    // Loop (delta-based, robust to tab throttling)
    function loop(){
      const now = Date.now();
      const dt = (now - S.lastTick) / 1000;
      S.lastTick = now;
      S.coins += cps() * Math.min(dt, 60);
      render();
    }
    setInterval(loop, 1000);

    // ===== Actions =====
    $('catchBtn').onclick = () => { S.catch += 1; S.bph += 3; render(); };

    $('netBtn').onclick = () => {
      if (S.coins >= S.netPrice){
        S.coins -= S.netPrice;
        S.nets += 1;
        S.bph += 20;
        S.netPrice = Math.ceil(S.netPrice * 1.25);
        $('netBtn').textContent = `‚öì Upgrade Curvature Lattice (${S.netPrice} TT)`;
        render();
      }
    };

    function prestige(){
      // earn 1 Œû‚ÄëSigil per 1000 TT (floor)
      const earned = Math.floor(S.coins / 1000);
      if (earned <= 0){ toast('Haul not big enough to impress Moxie.'); return; }
      if (!confirm(`Sell your entire haul for ${earned} Œû‚ÄëSigil(s)? This resets your catch and gear.`)) return;

      S.sigil += earned;
      // Reset loop
      S.coins = 0;
      S.bph = 0;
      S.catch = 0;
      S.nets = 0;
      S.netPrice = 100;

      save(); render();
      toast(`Trade complete. ${earned} Œû‚ÄëSigil(s) etched into your soul.`);
    }
    $('prestigeBtn').onclick = prestige;

    // Save / Reset
    function save(){ localStorage.setItem('moxies-catch', JSON.stringify(S)); }
    $('saveBtn').onclick = () => { save(); toast('Scroll sealed. Progress preserved.'); };
    $('resetBtn').onclick = () => {
      if (!confirm('Banish all progress to the depths?')) return;
      localStorage.removeItem('moxies-catch'); location.reload();
    };
    setInterval(save, 15000);

    // ===== Render =====
    function render(){
      $('coins').textContent = fmt(S.coins);
      $('cps').textContent = fmt(cps());
      $('bph').textContent = fmt(S.bph);
      $('catch').textContent = S.catch;
      $('sigil').textContent = S.sigil;
      $('mult').textContent = `${fmt(prestigeMult())}√ó`;
      $('netBtn').disabled = S.coins < S.netPrice;
    }

    // Init
    $('netBtn').textContent = `‚öì Upgrade Curvature Lattice (${S.netPrice} TT)`;
    render();
  </script>
</body>
</html>